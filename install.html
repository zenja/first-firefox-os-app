<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Install SouDouban!</title>
  </head>
  <body>
    <button id="install">
      Install SouDouban on your homescreen!
    </button>
      
    <script>
    (function(){
      function install(ev) {
        ev.preventDefault();
        // define the manifest URL
        var manifest_url = "http://wangxing.me/lab/firefoxos/soudouban.webapp";
        // install the app
        var myapp = navigator.mozApps.install(manifest_url);
        myapp.onsuccess = function(data) {
          // App is installed, remove button
          this.parentNode.removeChild(this);
        };
        myapp.onerror = function() {
          // App wasn't installed, info is in
          // installapp.error.name
         };
      };
      // get a reference to the button and call install() on click
      var button = document.getElementById('install');
      button.addEventListener('click', install, false);
    })();
    </script>
  </body>
</html>
